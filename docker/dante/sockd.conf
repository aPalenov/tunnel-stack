# Логи: выводим в STDERR, чтобы docker собирал их по умолчанию
logoutput: stderr

# Входящий интерфейс и порт
internal: eth0 port = 1080
# Исходящий интерфейс
external: eth0

# Отключаем аутентификацию по имени/паролю — опираемся на фильтрацию по IP
method: none

# Разрешаем доступ только с двух указанных IP и логируем попытки
client pass {
    from: 92.255.195.22/32 91.244.252.234/32 to: 0.0.0.0/0
    log: connect error disconnect
}

# Блокируем всех остальных клиентов
client block {
    from: 0.0.0.0/0 to: 0.0.0.0/0
    log: connect error
}

# Проходящий трафик: разрешаем только для указанных IP
pass {
    from: 92.255.195.22/32 91.244.252.234/32 to: 0.0.0.0/0
    protocol: tcp udp
}

# Блокируем весь остальной трафик
block {
    from: 0.0.0.0/0 to: 0.0.0.0/0
    log: connect error
}
